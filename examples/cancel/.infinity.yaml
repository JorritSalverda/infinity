type: cli
language: go
name: error-cancels-parallel-stages

build:
  stages:
  - name: parallel
    stages:
    - name: fails-in-container
      image: alpine:3.13
      commands:
      - sleep 1s
      - exit 1
    - name: gets-canceled-in-container
      image: alpine:3.13
      commands:
      - ps aux
      - trap "echo interrupt" 1 2 15
      - exec sleep 10s
    - name: gets-canceled-on-host
      runner: host
      commands:
      - sleep 10s