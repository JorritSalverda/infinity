type: firmware
language: c++
name: hello-arduino

build:
  stages:
  - name: upload-in-container
    image: jsalverda/arduino-cli:0.18.3
    privileged: true
    devices:
    - /dev/cu.usbserial-1460:/dev/cu.usbserial-1460
    commands:
    - arduino-cli board list
    - arduino-cli core list
    - arduino-cli compile -b arduino:avr:uno sketches/blink
  - name: upload-on-metal
    runner: metal
    commands:
    - arduino-cli version
    - arduino-cli board list
    - arduino-cli core list
    - arduino-cli compile -b arduino:avr:uno sketches/blink
    - arduino-cli upload -b arduino:avr:uno -p /dev/cu.usbserial-1460 sketches/blink